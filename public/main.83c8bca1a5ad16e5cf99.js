!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){},function(e,t,o){"use strict";o.r(t);o(0);class n{constructor(e,t){this.name=e,this.link=t,this.remove=this.remove.bind(this),this.cardElement=this.create(),this.cardElement.querySelector(".place-card__like-icon").addEventListener("click",this.like),this.cardElement.querySelector(".place-card__delete-icon").addEventListener("click",this.remove)}create(){const e=`background-image: url(${this.link})`,t=document.createElement("div");t.classList.add("place-card");const o=document.createElement("div");o.classList.add("place-card__image");const n=document.createElement("button");n.classList.add("place-card__delete-icon");const r=document.createElement("div");r.classList.add("place-card__description");const i=document.createElement("h3");i.classList.add("place-card__name");const a=document.createElement("div");a.classList.add("place-card__description-column");const s=document.createElement("button");s.classList.add("place-card__like-icon");const d=document.createElement("div");return d.classList.add("place-card__like-counter"),r.appendChild(i),r.appendChild(a),a.appendChild(s),a.appendChild(d),o.appendChild(n),t.appendChild(o),t.appendChild(r),i.textContent=this.name,o.setAttribute("style",e),t}like(e){e.target.classList.toggle("place-card__like-icon_liked")}remove(e){this.cardElement.remove()}}const r=document.forms.new,i=document.forms.edit,a=document.querySelector(".popup__button"),s=i.elements.fullname,d=i.elements.aboutme,c=r.elements.name,u=r.elements.link,l=document.querySelector(".popup-edit__button");class p{constructor(e){this.container=e,this.validation()}open(e){this.container.classList.add(`${e}_is-opened`)}close(e){this.container.classList.remove(`${e}_is-opened`)}validation(){r.addEventListener("input",(function(e){0===c.value.length||0===u.value.length?(a.setAttribute("disabled",!0),a.classList.add("popup__button_disabled")):(a.removeAttribute("disabled"),a.classList.remove("popup__button_disabled"))})),i.addEventListener("input",(function(e){0===s.value.length||0===d.value.length||1===s.value.length||1===d.value.length?(l.setAttribute("disabled",!0),l.classList.add("popup__button_disabled")):(l.removeAttribute("disabled"),l.classList.remove("popup__button_disabled"))})),""===c.value?(a.setAttribute("disabled",!0),a.classList.add("popup__button_disabled")):(a.removeAttribute("disabled"),a.classList.remove("popup__button_disabled")),s.addEventListener("input",(function(){const e=document.querySelector(".popup-edit__fullname-error_required"),t=document.querySelector(".popup-edit__fullname-error_length"),o=i.fullname.validity;!1===o.valueMissing?e.classList.remove("popup-edit__fullname-error_add"):e.classList.add("popup-edit__fullname-error_add"),!1===o.tooShort?t.classList.remove("popup-edit__fullname-error_add"):t.classList.add("popup-edit__fullname-error_add")})),d.addEventListener("input",(function(){const e=document.querySelector(".popup-edit__aboutme-error_required"),t=document.querySelector(".popup-edit__aboutme-error_length"),o=i.aboutme.validity;!1===o.valueMissing?e.classList.remove("popup-edit__aboutme-error_add"):e.classList.add("popup-edit__aboutme-error_add"),!1===o.tooShort?t.classList.remove("popup-edit__aboutme-error_add"):t.classList.add("popup-edit__aboutme-error_add")}))}}const m=document.forms.edit,_=m.elements.fullname,h=m.elements.aboutme;o.d(t,"api",(function(){return j}));const f=document.querySelector(".user-info__button"),b=document.querySelector(".popup__close"),v=(document.forms.new,document.querySelector(".user-info__button_edit")),y=document.querySelector(".popup-edit__close"),L=(document.querySelector(".popup-edit__button"),document.forms.edit),k=(document.querySelector(".places-list"),document.querySelector(".popup-photo__image")),g=document.querySelector(".popup-photo__close"),S=document.querySelector(".user-info__name"),E=document.querySelector(".user-info__job"),C=L.elements.aboutme,q=L.elements.fullname,j=new class{constructor(e,t){this.url=e,this.token=t}getCards(){return fetch(`${this.url}/cards`,{headers:{authorization:this.token}}).then(e=>e.ok?e.json():Promise.reject(e.status)).catch(e=>{console.log(`Ошибка: ${e}`)})}informationAboutMe(){return fetch(`${this.url}/users/me`,{headers:{authorization:this.token}}).then(e=>e.ok?e.json():Promise.reject(e.status)).catch(e=>{console.log(`Ошибка: ${e}`)})}addCard(){return fetch(`${this.url}/cards`,{method:"POST",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({name:addName.value,link:addLink.value})}).then(e=>e.ok?e.json():Promise.reject(e.status)).catch(e=>{console.log(`Ошибка: ${e}`)})}editInformationAboutMe(){return fetch(`${this.url}/users/me`,{method:"PATCH",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({name:_.value,about:h.value})}).then(e=>e.ok?e.json():Promise.reject(e.status)).catch(e=>{console.log(`Ошибка: ${e}`)})}likesCounter(){return fetch(`${this.url}/cards`,{headers:{authorization:this.token}}).then(e=>e.ok?e.json():Promise.reject(e.status))}}("https://praktikum.tk/cohort2","ba6f616a-7f07-4a53-991f-9de8753974a0"),A=new class{constructor(e){this.container=e,this.render()}addCard(e,t){const{cardElement:o}=new n(e,t);this.container.appendChild(o)}render(){j.getCards().then(e=>{for(let t=0;t<e.length;t++)this.addCard(e[t].name,e[t].link)})}}(document.querySelector(".places-list")),x=new p(document.querySelector(".popup")),P=new p(document.querySelector(".popup-photo")),$=new p(document.querySelector(".popup-edit"));j.informationAboutMe().then(e=>{e.name&&e.about&&(S.textContent=e.name,E.textContent=e.about)}),f.addEventListener("click",(function(){x.open("popup")})),b.addEventListener("click",(function(){x.close("popup")})),document.forms.new.addEventListener("submit",(function(e){e.preventDefault(),j.addCard().then(e=>{console.log(e),A.addCard(e.name,e.link),x.close("popup")})})),v.addEventListener("click",(function(){q.setAttribute("value",S.textContent),C.setAttribute("value",E.textContent),$.open("popup-edit")})),y.addEventListener("click",(function(){$.close("popup-edit")})),L.addEventListener("submit",(function(e){e.preventDefault(),j.editInformationAboutMe().then(e=>{S.textContent=e.name,E.textContent=e.about}),$.close("popup-edit")})),g.addEventListener("click",(function(){P.close("popup-photo")})),document.querySelector(".places-list").addEventListener("click",(function(e){if(!0===e.target.classList.contains("place-card__image")){P.open("popup-photo");const t=e.target.getAttribute("style").slice(22,-1);k.setAttribute("src",t)}}))}]);